# QR System - Mobile Application (Mobile-Rizky)

A comprehensive Android application for a QR-based Attendance and Academic Management System. This app serves multiple roles including Students, Teachers, Homeroom Teachers, Vice Principals (Waka), and Admins.

## ðŸš€ Features by Role

### 1. Student (Siswa)
- **Scanning Attendance**: Scan QR codes generated by teachers to record real-time attendance.
- **Attendance History**: View personal attendance logs (Present, Late, Sick, Excused, Alpha).
- **Daily Schedule**: View personal class schedule for the current date.

### 2. Teacher (Guru)
- **Schedule Management**: View today's teaching schedule.
- **Manual Attendance**: Input or update student attendance manually for specific classes.
- **Attendance Statistics**: View summary of student attendance for lessons taught.

### 3. Homeroom Teacher (Wali Kelas)
- **Class Monitoring**: Real-time monitoring of attendance for students in the homeroom class.
- **Follow-up Management**: Identify and manage students who require academic or attendance follow-up.
- **Class Statistics**: Comprehensive view of class attendance trends.

### 4. Vice Principal (Waka Kurikulum)
- **School-Wide Statistics**: View live charts and trends of attendance for the entire school.
- **Dispensary Management**: Approve or reject student absence/dispensary requests.
- **Notifications**: Receive alerts for critical school-wide attendance events.

### 5. Admin
- **Entity CRUD**: Full management (Create, Read, Update, Delete) of:
  - Students (Siswa)
  - Teachers (Guru)
  - Classes (Kelas)
  - Majors (Jurusan)
- **System Monitoring**: Admin dashboard with real-time system counts and statistics.

---

## ðŸ›  Technology Stack
- **Language**: Kotlin
- **Networking**: Retrofit 2 & OkHttp 3
- **Image Loading**: Glide
- **Charts**: MPAndroidChart
- **Persistence**: SharedPreferences (Session Management)
- **Data Format**: GSON

---

## âš™ï¸ Setup & Installation

### Prerequisites
1. **Android Studio** (Flamingo or newer recommended)
2. **Java 17+**
3. **Android SDK** (API Level 24+ minimum, Level 33+ target)
4. **Backend API**: Ensure the `qr-system` backend is running.

### Configuration
Before building the app, you MUST configure the API endpoint:

1. Open `app/src/main/java/com/example/ritamesa/data/api/ApiClient.kt`.
2. Locate the `BASE_URL` constant:
   ```kotlin
   // For Emulator:
   private const val BASE_URL = "http://10.0.2.2:8000/api/" 
   
   // For Physical Device (use your PC's Local IP):
   // private const val BASE_URL = "http://192.168.1.XX:8000/api/"
   ```
3. Update the IP address to match your backend host.

---

## ðŸ³ Docker Setup (Linux Mint / Ubuntu)

If you are running the backend using Docker, follow these steps to ensure connectivity with the mobile app.

### 1. Install Docker on Mint OS
Linux Mint is binary compatible with Ubuntu. Run these commands:
```bash
# Update package index
sudo apt update

# Install dependencies
sudo apt install apt-transport-https ca-certificates curl software-properties-common

# Add Docker's GPG key
curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg

# Add repository (using Ubuntu base)
echo "deb [arch=$(dpkg --print-architecture) signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://download.docker.com/linux/ubuntu $(. /etc/os-release && echo "$UBUNTU_CODENAME") stable" | sudo tee /etc/apt/sources.list.d/docker.list > /dev/null

# Install Docker
sudo apt update
sudo apt install docker-ce docker-ce-cli containerd.io docker-compose-plugin

# Post-install: Add user to docker group
sudo usermod -aG docker $USER
# NOTE: Log out and log back in for this to take effect!
```

### 2. Run the Backend
Navigate to the root of the `qr-system` project:
```bash
# Start the containers in background
docker compose up -d

# Verify services are running
docker compose ps
```

### 3. Connecting Mobile to Docker
- **Emulator**: Use `http://10.0.2.2:8000/api/` as the `BASE_URL`.
- **Physical Device**: 
  - Ensure your phone and PC are on the same Wi-Fi.
  - Find your PC IP: `hostname -I | awk '{print $1}'`
  - Update `BASE_URL` in `ApiClient.kt` to `http://YOUR_PC_IP:8000/api/`.
  - **Firewall Note**: If connection fails on Mint, allow port 8000: `sudo ufw allow 8000/tcp`

---

### Build and Run
1. Open the project in Android Studio.
2. Let Gradle sync complete.
3. Select your target device (Emulator or Physical).
4. Click **Run** (`Shift + F10`).

---

## ðŸ“‚ Project Structure
- `data/api/`: Retrofit interfaces and client configuration.
- `data/model/`: Data classes for API Request/Response.
- `data/pref/`: Session and token management.
- `ui/`: Activities and Adapters for each role (organized in the package root).

## ðŸ“„ License
This project is part of the QR Attendance System. All rights reserved.
